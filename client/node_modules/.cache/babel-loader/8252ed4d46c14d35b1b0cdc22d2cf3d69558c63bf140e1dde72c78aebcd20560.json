{"ast":null,"code":"import axios from'axios';import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import'../styles/Flights.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Flights=()=>{const[userDetails,setUserDetails]=useState();useEffect(()=>{fetchUserData();},[]);const fetchUserData=async()=>{try{const id=localStorage.getItem('userId');await axios.get(`https://flight-booking-mern-webapp.onrender.com/fetch-user/${id}`).then(response=>{setUserDetails(response.data);console.log(response.data);});}catch(err){}};const[flights,setFlights]=useState([]);const navigate=useNavigate();const fetchFlights=async()=>{await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-flights').then(response=>{setFlights(response.data);console.log(response.data);});};useEffect(()=>{fetchFlights();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"allFlightsPage\",children:userDetails?/*#__PURE__*/_jsx(_Fragment,{children:userDetails.approval==='not-approved'?/*#__PURE__*/_jsxs(\"div\",{className:\"notApproved-box\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Approval Required!!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your application is under processing. It needs an approval from the administrator. Kindly please be patience!!\"})]}):userDetails.approval==='approved'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"All Flights\"}),/*#__PURE__*/_jsx(\"div\",{className:\"allFlights\",children:flights.filter(flight=>flight.flightName===localStorage.getItem('username')).map(Flight=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"allFlights-Flight\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"_id:\"}),\" \",Flight._id]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Flight Id:\"}),\" \",Flight.flightId]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Flight name:\"}),\" \",Flight.flightName]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Starting station:\"}),\" \",Flight.origin]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Departure time:\"}),\" \",Flight.departureTime]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Destination:\"}),\" \",Flight.destination]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Arrival time:\"}),\" \",Flight.arrivalTime]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Base price:\"}),\" \",Flight.basePrice]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Total seats:\"}),\" \",Flight.totalSeats]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>navigate(`/edit-flight/${Flight._id}`),children:\"Edit details\"})})]},Flight._id);})})]}):\"\"}):\"\"});};export default Flights;","map":{"version":3,"names":["axios","React","useEffect","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Flights","userDetails","setUserDetails","fetchUserData","id","localStorage","getItem","get","then","response","data","console","log","err","flights","setFlights","navigate","fetchFlights","className","children","approval","filter","flight","flightName","map","Flight","_id","flightId","origin","departureTime","destination","arrivalTime","basePrice","totalSeats","onClick"],"sources":["C:/Users/Navaneethan/Downloads/Flight-Booking-MERN-Webapp/client/src/pages/Flights.jsx"],"sourcesContent":["import axios from 'axios';\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../styles/Flights.css';\r\n\r\nconst Flights = () => {\r\n  const [userDetails, setUserDetails] = useState();\r\n\r\n  useEffect(()=>{\r\n    fetchUserData();\r\n  }, [])\r\n\r\n  const fetchUserData = async () =>{\r\n    try{\r\n      const id = localStorage.getItem('userId');\r\n      await axios.get(`https://flight-booking-mern-webapp.onrender.com/fetch-user/${id}`).then(\r\n        (response)=>{\r\n          setUserDetails(response.data);\r\n          console.log(response.data);\r\n        }\r\n      )\r\n\r\n    }catch(err){\r\n\r\n    }\r\n  } \r\n\r\n  const [flights, setFlights] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  \r\n  const fetchFlights = async () =>{\r\n    await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-flights').then(\r\n      (response)=>{\r\n        setFlights(response.data);\r\n        console.log(response.data)\r\n      }\r\n      )\r\n    }\r\n    \r\n    useEffect(()=>{\r\n      fetchFlights();\r\n    }, [])\r\n\r\n  return (\r\n    <div className=\"allFlightsPage\">\r\n\r\n      {userDetails ?\r\n        <>\r\n          {userDetails.approval === 'not-approved' ?\r\n            <div className=\"notApproved-box\">\r\n              <h3>Approval Required!!</h3>\r\n              <p>Your application is under processing. It needs an approval from the administrator. Kindly please be patience!!</p>\r\n            </div>\r\n\r\n\r\n          : userDetails.approval === 'approved' ?\r\n            <>\r\n              <h1>All Flights</h1>\r\n  \r\n              <div className=\"allFlights\">\r\n\r\n                {flights.filter(flight=> flight.flightName === localStorage.getItem('username')).map((Flight)=>{\r\n                  return(\r\n\r\n                      <div className=\"allFlights-Flight\" key={Flight._id}>\r\n                        <p><b>_id:</b> {Flight._id}</p>\r\n                        <span>\r\n                          <p><b>Flight Id:</b> {Flight.flightId}</p>\r\n                          <p><b>Flight name:</b> {Flight.flightName}</p>\r\n                        </span>\r\n                        <span>\r\n                          <p><b>Starting station:</b> {Flight.origin}</p>\r\n                          <p><b>Departure time:</b> {Flight.departureTime}</p>\r\n                        </span>\r\n                        <span>\r\n                          <p><b>Destination:</b> {Flight.destination}</p>\r\n                          <p><b>Arrival time:</b> {Flight.arrivalTime}</p>\r\n                        </span>\r\n                        <span>\r\n                          <p><b>Base price:</b> {Flight.basePrice}</p>\r\n                          <p><b>Total seats:</b> {Flight.totalSeats}</p>\r\n                        </span>\r\n                        <div>\r\n                          <button className=\"btn btn-primary\" onClick={()=> navigate(`/edit-flight/${Flight._id}`)}>Edit details</button>\r\n                        </div>\r\n                      </div>\r\n                  )\r\n                })}\r\n              </div>\r\n            </>\r\n          :\r\n            \"\"\r\n          }\r\n        </>\r\n      :\r\n       \"\"\r\n      }\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Flights"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAE/B,KAAM,CAAAC,OAAO,CAAGA,CAAA,GAAM,CACpB,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGV,QAAQ,CAAC,CAAC,CAEhDD,SAAS,CAAC,IAAI,CACZY,aAAa,CAAC,CAAC,CACjB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,aAAa,CAAG,KAAAA,CAAA,GAAW,CAC/B,GAAG,CACD,KAAM,CAAAC,EAAE,CAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CACzC,KAAM,CAAAjB,KAAK,CAACkB,GAAG,CAAE,8DAA6DH,EAAG,EAAC,CAAC,CAACI,IAAI,CACrFC,QAAQ,EAAG,CACVP,cAAc,CAACO,QAAQ,CAACC,IAAI,CAAC,CAC7BC,OAAO,CAACC,GAAG,CAACH,QAAQ,CAACC,IAAI,CAAC,CAC5B,CACF,CAAC,CAEH,CAAC,MAAMG,GAAG,CAAC,CAEX,CACF,CAAC,CAED,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGvB,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAAAwB,QAAQ,CAAGvB,WAAW,CAAC,CAAC,CAG9B,KAAM,CAAAwB,YAAY,CAAG,KAAAA,CAAA,GAAW,CAC9B,KAAM,CAAA5B,KAAK,CAACkB,GAAG,CAAC,+DAA+D,CAAC,CAACC,IAAI,CAClFC,QAAQ,EAAG,CACVM,UAAU,CAACN,QAAQ,CAACC,IAAI,CAAC,CACzBC,OAAO,CAACC,GAAG,CAACH,QAAQ,CAACC,IAAI,CAAC,CAC5B,CACA,CAAC,CACH,CAAC,CAEDnB,SAAS,CAAC,IAAI,CACZ0B,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,EAAE,CAAC,CAER,mBACEtB,IAAA,QAAKuB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAE5BlB,WAAW,cACVN,IAAA,CAAAI,SAAA,EAAAoB,QAAA,CACGlB,WAAW,CAACmB,QAAQ,GAAK,cAAc,cACtCvB,KAAA,QAAKqB,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BxB,IAAA,OAAAwB,QAAA,CAAI,qBAAmB,CAAI,CAAC,cAC5BxB,IAAA,MAAAwB,QAAA,CAAG,gHAA8G,CAAG,CAAC,EAClH,CAAC,CAGNlB,WAAW,CAACmB,QAAQ,GAAK,UAAU,cACnCvB,KAAA,CAAAE,SAAA,EAAAoB,QAAA,eACExB,IAAA,OAAAwB,QAAA,CAAI,aAAW,CAAI,CAAC,cAEpBxB,IAAA,QAAKuB,SAAS,CAAC,YAAY,CAAAC,QAAA,CAExBL,OAAO,CAACO,MAAM,CAACC,MAAM,EAAGA,MAAM,CAACC,UAAU,GAAKlB,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAAC,CAACkB,GAAG,CAAEC,MAAM,EAAG,CAC7F,mBAEI5B,KAAA,QAAKqB,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCtB,KAAA,MAAAsB,QAAA,eAAGxB,IAAA,MAAAwB,QAAA,CAAG,MAAI,CAAG,CAAC,IAAC,CAACM,MAAM,CAACC,GAAG,EAAI,CAAC,cAC/B7B,KAAA,SAAAsB,QAAA,eACEtB,KAAA,MAAAsB,QAAA,eAAGxB,IAAA,MAAAwB,QAAA,CAAG,YAAU,CAAG,CAAC,IAAC,CAACM,MAAM,CAACE,QAAQ,EAAI,CAAC,cAC1C9B,KAAA,MAAAsB,QAAA,eAAGxB,IAAA,MAAAwB,QAAA,CAAG,cAAY,CAAG,CAAC,IAAC,CAACM,MAAM,CAACF,UAAU,EAAI,CAAC,EAC1C,CAAC,cACP1B,KAAA,SAAAsB,QAAA,eACEtB,KAAA,MAAAsB,QAAA,eAAGxB,IAAA,MAAAwB,QAAA,CAAG,mBAAiB,CAAG,CAAC,IAAC,CAACM,MAAM,CAACG,MAAM,EAAI,CAAC,cAC/C/B,KAAA,MAAAsB,QAAA,eAAGxB,IAAA,MAAAwB,QAAA,CAAG,iBAAe,CAAG,CAAC,IAAC,CAACM,MAAM,CAACI,aAAa,EAAI,CAAC,EAChD,CAAC,cACPhC,KAAA,SAAAsB,QAAA,eACEtB,KAAA,MAAAsB,QAAA,eAAGxB,IAAA,MAAAwB,QAAA,CAAG,cAAY,CAAG,CAAC,IAAC,CAACM,MAAM,CAACK,WAAW,EAAI,CAAC,cAC/CjC,KAAA,MAAAsB,QAAA,eAAGxB,IAAA,MAAAwB,QAAA,CAAG,eAAa,CAAG,CAAC,IAAC,CAACM,MAAM,CAACM,WAAW,EAAI,CAAC,EAC5C,CAAC,cACPlC,KAAA,SAAAsB,QAAA,eACEtB,KAAA,MAAAsB,QAAA,eAAGxB,IAAA,MAAAwB,QAAA,CAAG,aAAW,CAAG,CAAC,IAAC,CAACM,MAAM,CAACO,SAAS,EAAI,CAAC,cAC5CnC,KAAA,MAAAsB,QAAA,eAAGxB,IAAA,MAAAwB,QAAA,CAAG,cAAY,CAAG,CAAC,IAAC,CAACM,MAAM,CAACQ,UAAU,EAAI,CAAC,EAC1C,CAAC,cACPtC,IAAA,QAAAwB,QAAA,cACExB,IAAA,WAAQuB,SAAS,CAAC,iBAAiB,CAACgB,OAAO,CAAEA,CAAA,GAAKlB,QAAQ,CAAE,gBAAeS,MAAM,CAACC,GAAI,EAAC,CAAE,CAAAP,QAAA,CAAC,cAAY,CAAQ,CAAC,CAC5G,CAAC,GApBgCM,MAAM,CAACC,GAqB1C,CAAC,CAEZ,CAAC,CAAC,CACC,CAAC,EACN,CAAC,CAEH,EAAE,CAEJ,CAAC,CAEJ,EAAE,CAGA,CAAC,CAEV,CAAC,CAED,cAAe,CAAA1B,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}