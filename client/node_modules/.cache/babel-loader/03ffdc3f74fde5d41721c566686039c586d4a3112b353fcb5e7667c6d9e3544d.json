{"ast":null,"code":"import axios from'axios';import React,{useEffect,useState}from'react';import'../styles/AllBookings.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const AllBookings=()=>{const[bookings,setBookings]=useState([]);const userId=localStorage.getItem('userId');useEffect(()=>{fetchBookings();},[]);const fetchBookings=async()=>{await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-bookings').then(response=>{setBookings(response.data.reverse());});};const cancelTicket=async id=>{await axios.put(`https://flight-booking-mern-webapp.onrender.com/cancel-ticket/${id}`).then(response=>{alert(\"Ticket cancelled!!\");fetchBookings();});};return/*#__PURE__*/_jsxs(\"div\",{className:\"user-bookingsPage\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Bookings\"}),/*#__PURE__*/_jsx(\"div\",{className:\"user-bookings\",children:bookings.map(booking=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"user-booking\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Booking ID:\"}),\" \",booking._id]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Mobile:\"}),\" \",booking.mobile]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Email:\"}),\" \",booking.email]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Flight Id:\"}),\" \",booking.flightId]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Flight name:\"}),\" \",booking.flightName]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"On-boarding:\"}),\" \",booking.departure]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Destination:\"}),\" \",booking.destination]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"b\",{children:\"Passengers:\"})}),/*#__PURE__*/_jsx(\"ol\",{children:booking.passengers.map((passenger,i)=>{return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Name:\"}),\" \",passenger.name,\",  \",/*#__PURE__*/_jsx(\"b\",{children:\"Age:\"}),\" \",passenger.age]})},i);})})]}),booking.bookingStatus==='confirmed'?/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Seats:\"}),\" \",booking.seats]}):\"\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Booking date:\"}),\" \",booking.bookingDate?booking.bookingDate.slice(0,10):'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Journey date:\"}),\" \",booking.journeyDate?booking.journeyDate.slice(0,10):'N/A']})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Journey Time:\"}),\" \",booking.journeyTime]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Total price:\"}),\" \",booking.totalPrice]})]}),booking.bookingStatus==='cancelled'?/*#__PURE__*/_jsxs(\"p\",{style:{color:\"red\"},children:[/*#__PURE__*/_jsx(\"b\",{children:\"Booking status:\"}),\" \",booking.bookingStatus]}):/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Booking status:\"}),\" \",booking.bookingStatus]}),booking.bookingStatus==='confirmed'?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:()=>cancelTicket(booking._id),children:\"Cancel Ticket\"})}):/*#__PURE__*/_jsx(_Fragment,{})]},booking._id);})})]});};export default AllBookings;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}