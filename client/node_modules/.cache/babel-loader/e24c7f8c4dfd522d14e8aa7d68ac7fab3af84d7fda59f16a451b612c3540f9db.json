{"ast":null,"code":"import React,{createContext,useState}from'react';import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";export const GeneralContext=/*#__PURE__*/createContext();const GeneralContextProvider=_ref=>{let{children}=_ref;const[username,setUsername]=useState('');const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[usertype,setUsertype]=useState('');const[ticketBookingDate,setTicketBookingDate]=useState();const inputs={username,email,usertype,password};const navigate=useNavigate();const login=async(email,password)=>{try{const loginInputs={email,password};const res=await axios.post('https://flight-booking-mern-webapp.onrender.com/login',loginInputs);// Store user data in localStorage\nlocalStorage.setItem('userId',res.data._id);localStorage.setItem('userType',res.data.usertype);localStorage.setItem('username',res.data.username);localStorage.setItem('email',res.data.email);// Redirect based on user type\nif(res.data.usertype==='customer'){navigate('/');}else if(res.data.usertype==='admin'){navigate('/admin');}else if(res.data.usertype==='flight-operator'){navigate('/flight-admin');}}catch(err){var _err$response;alert(\"Login failed! Please try again.\");console.error(\"Login Error:\",((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data)||err.message);}};const register=async()=>{try{const res=await axios.post('https://flight-booking-mern-webapp.onrender.com/register',inputs);// Store user data in localStorage\nlocalStorage.setItem('userId',res.data._id);localStorage.setItem('userType',res.data.usertype);localStorage.setItem('username',res.data.username);localStorage.setItem('email',res.data.email);// Redirect based on user type\nif(res.data.usertype==='customer'){navigate('/');}else if(res.data.usertype==='admin'){navigate('/admin');}else if(res.data.usertype==='flight-operator'){navigate('/flight-admin');}}catch(err){var _err$response2;alert(\"Registration failed! Please try again.\");console.error(\"Registration Error:\",((_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.data)||err.message);}};const logout=()=>{// Clear localStorage\nlocalStorage.clear();alert(\"Logged out successfully!\");// Refresh the page and redirect to home\nwindow.location.reload();navigate('/');};return/*#__PURE__*/_jsx(GeneralContext.Provider,{value:{login,register,logout,username,setUsername,email,setEmail,password,setPassword,usertype,setUsertype,ticketBookingDate,setTicketBookingDate},children:children});};export default GeneralContextProvider;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}