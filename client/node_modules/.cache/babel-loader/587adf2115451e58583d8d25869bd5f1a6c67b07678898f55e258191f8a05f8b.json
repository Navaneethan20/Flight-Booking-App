{"ast":null,"code":"import axios from'axios';import React,{useEffect,useState}from'react';import'../styles/AllBookings.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const AllBookings=()=>{const[bookings,setBookings]=useState([]);const userId=localStorage.getItem('userId');useEffect(()=>{fetchBookings();},[]);const fetchBookings=async()=>{await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-bookings').then(response=>{setBookings(response.data.reverse());});};const cancelTicket=async id=>{await axios.put(`https://flight-booking-mern-webapp.onrender.com/cancel-ticket/${id}`).then(response=>{alert(\"Ticket cancelled!!\");fetchBookings();});};return/*#__PURE__*/_jsxs(\"div\",{className:\"user-bookingsPage\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Bookings\"}),/*#__PURE__*/_jsx(\"div\",{className:\"user-bookings\",children:bookings.map(booking=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"user-booking\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Booking ID:\"}),\" \",booking._id]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Mobile:\"}),\" \",booking.mobile]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Email:\"}),\" \",booking.email]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Flight Id:\"}),\" \",booking.flightId]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Flight name:\"}),\" \",booking.flightName]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"On-boarding:\"}),\" \",booking.departure]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Destination:\"}),\" \",booking.destination]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"b\",{children:\"Passengers:\"})}),/*#__PURE__*/_jsx(\"ol\",{children:booking.passengers.map((passenger,i)=>{return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Name:\"}),\" \",passenger.name,\",  \",/*#__PURE__*/_jsx(\"b\",{children:\"Age:\"}),\" \",passenger.age]})},i);})})]}),booking.bookingStatus==='confirmed'?/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Seats:\"}),\" \",booking.seats]}):\"\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Booking date:\"}),\" \",booking.bookingDate?booking.bookingDate.slice(0,10):'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Journey date:\"}),\" \",booking.journeyDate?booking.journeyDate.slice(0,10):'N/A']})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Journey Time:\"}),\" \",booking.journeyTime]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Total price:\"}),\" \",booking.totalPrice]})]}),booking.bookingStatus==='cancelled'?/*#__PURE__*/_jsxs(\"p\",{style:{color:\"red\"},children:[/*#__PURE__*/_jsx(\"b\",{children:\"Booking status:\"}),\" \",booking.bookingStatus]}):/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Booking status:\"}),\" \",booking.bookingStatus]}),booking.bookingStatus==='confirmed'?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:()=>cancelTicket(booking._id),children:\"Cancel Ticket\"})}):/*#__PURE__*/_jsx(_Fragment,{})]},booking._id);})})]});};export default AllBookings;","map":{"version":3,"names":["axios","React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AllBookings","bookings","setBookings","userId","localStorage","getItem","fetchBookings","get","then","response","data","reverse","cancelTicket","id","put","alert","className","children","map","booking","_id","mobile","email","flightId","flightName","departure","destination","passengers","passenger","i","name","age","bookingStatus","seats","bookingDate","slice","journeyDate","journeyTime","totalPrice","style","color","onClick"],"sources":["C:/Users/Navaneethan/Downloads/Flight-Booking-MERN-Webapp/client/src/pages/AllBookings.jsx"],"sourcesContent":["import axios from 'axios';\r\nimport React, { useEffect, useState } from 'react'\r\nimport '../styles/AllBookings.css';\r\n\r\nconst AllBookings = () => {\r\n\r\n  const [bookings, setBookings] = useState([]);\r\n\r\n  const userId = localStorage.getItem('userId');\r\n\r\n  useEffect(() => {\r\n    fetchBookings();\r\n  }, [])\r\n\r\n  const fetchBookings = async () => {\r\n    await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-bookings').then(\r\n      (response) => {\r\n        setBookings(response.data.reverse());\r\n      }\r\n    )\r\n  }\r\n\r\n  const cancelTicket = async (id) => {\r\n    await axios.put(`https://flight-booking-mern-webapp.onrender.com/cancel-ticket/${id}`).then(\r\n      (response) => {\r\n        alert(\"Ticket cancelled!!\");\r\n        fetchBookings();\r\n      }\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"user-bookingsPage\">\r\n      <h1>Bookings</h1>\r\n\r\n      <div className=\"user-bookings\">\r\n\r\n        {bookings.map((booking) => {\r\n          return (\r\n            <div className=\"user-booking\" key={booking._id}>\r\n              <p><b>Booking ID:</b> {booking._id}</p>\r\n              <span>\r\n                <p><b>Mobile:</b> {booking.mobile}</p>\r\n                <p><b>Email:</b> {booking.email}</p>\r\n              </span>\r\n              <span>\r\n                <p><b>Flight Id:</b> {booking.flightId}</p>\r\n                <p><b>Flight name:</b> {booking.flightName}</p>\r\n              </span>\r\n              <span>\r\n                <p><b>On-boarding:</b> {booking.departure}</p>\r\n                <p><b>Destination:</b> {booking.destination}</p>\r\n              </span>\r\n              <span>\r\n                <div>\r\n                  <p><b>Passengers:</b></p>\r\n                  <ol>\r\n                    {booking.passengers.map((passenger, i) => {\r\n                      return (\r\n                        <li key={i}><p><b>Name:</b> {passenger.name},  <b>Age:</b> {passenger.age}</p></li>\r\n                      )\r\n                    })}\r\n                  </ol>\r\n                </div>\r\n                {booking.bookingStatus === 'confirmed' ? <p><b>Seats:</b> {booking.seats}</p> : \"\"}\r\n              </span>\r\n              <span>\r\n                <p><b>Booking date:</b> {booking.bookingDate ? booking.bookingDate.slice(0, 10) : 'N/A'}</p>\r\n                <p><b>Journey date:</b> {booking.journeyDate ? booking.journeyDate.slice(0, 10) : 'N/A'}</p>\r\n              </span>\r\n\r\n              <span>\r\n                <p><b>Journey Time:</b> {booking.journeyTime}</p>\r\n                <p><b>Total price:</b> {booking.totalPrice}</p>\r\n              </span>\r\n              {booking.bookingStatus === 'cancelled' ?\r\n                <p style={{ color: \"red\" }}><b>Booking status:</b> {booking.bookingStatus}</p>\r\n                :\r\n                <p><b>Booking status:</b> {booking.bookingStatus}</p>\r\n              }\r\n              {booking.bookingStatus === 'confirmed' ?\r\n                <div>\r\n                  <button className=\"btn btn-danger\" onClick={() => cancelTicket(booking._id)}>Cancel Ticket</button>\r\n                </div>\r\n\r\n                :\r\n                <></>}\r\n            </div>\r\n          )\r\n        })}\r\n\r\n\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AllBookings"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}