{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Navaneethan\\\\Downloads\\\\Flight-Booking-MERN-Webapp\\\\client\\\\src\\\\context\\\\GeneralContext.jsx\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState } from 'react';\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const GeneralContext = /*#__PURE__*/createContext();\nconst GeneralContextProvider = ({\n  children\n}) => {\n  _s();\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [usertype, setUsertype] = useState('');\n  const [ticketBookingDate, setTicketBookingDate] = useState();\n  const inputs = {\n    username,\n    email,\n    usertype,\n    password\n  };\n  const navigate = useNavigate();\n  const login = async (email, password) => {\n    try {\n      const loginInputs = {\n        email,\n        password\n      };\n      const res = await axios.post('http://localhost:6001/login', loginInputs);\n      // Store user data in localStorage\n      localStorage.setItem('userId', res.data._id);\n      localStorage.setItem('userType', res.data.usertype);\n      localStorage.setItem('username', res.data.username);\n      localStorage.setItem('email', res.data.email);\n\n      // Redirect based on user type\n      if (res.data.usertype === 'customer') {\n        navigate('/');\n        alert(\"Welcome \");\n      } else if (res.data.usertype === 'admin') {\n        navigate('/admin');\n      } else if (res.data.usertype === 'flight-operator') {\n        navigate('/flight-admin');\n      }\n    } catch (err) {\n      var _err$response;\n      alert(\"Login failed! Please try again.\");\n      console.error(\"Login Error:\", ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err.message);\n    }\n  };\n  const register = async () => {\n    try {\n      const res = await axios.post('http://localhost:6001/register', inputs);\n      // Store user data in localStorage\n      localStorage.setItem('userId', res.data._id);\n      localStorage.setItem('userType', res.data.usertype);\n      localStorage.setItem('username', res.data.username);\n      localStorage.setItem('email', res.data.email);\n\n      // Redirect based on user type\n      if (res.data.usertype === 'customer') {\n        navigate('/');\n      } else if (res.data.usertype === 'admin') {\n        navigate('/admin');\n      } else if (res.data.usertype === 'flight-operator') {\n        navigate('/flight-admin');\n      }\n    } catch (err) {\n      var _err$response2;\n      alert(\"Registration failed! Please try again.\");\n      console.error(\"Registration Error:\", ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.data) || err.message);\n    }\n  };\n  const logout = () => {\n    // Clear localStorage\n    localStorage.clear();\n    alert(\"Logged out successfully!\");\n\n    // Refresh the page and redirect to home\n    window.location.reload();\n    navigate('/');\n  };\n  return /*#__PURE__*/_jsxDEV(GeneralContext.Provider, {\n    value: {\n      login,\n      register,\n      logout,\n      username,\n      setUsername,\n      email,\n      setEmail,\n      password,\n      setPassword,\n      usertype,\n      setUsertype,\n      ticketBookingDate,\n      setTicketBookingDate\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n};\n_s(GeneralContextProvider, \"sPqa2Pr2KjRHjAwmEUMF5G6axW8=\", false, function () {\n  return [useNavigate];\n});\n_c = GeneralContextProvider;\nexport default GeneralContextProvider;\nvar _c;\n$RefreshReg$(_c, \"GeneralContextProvider\");","map":{"version":3,"names":["React","createContext","useState","axios","useNavigate","jsxDEV","_jsxDEV","GeneralContext","GeneralContextProvider","children","_s","username","setUsername","email","setEmail","password","setPassword","usertype","setUsertype","ticketBookingDate","setTicketBookingDate","inputs","navigate","login","loginInputs","res","post","localStorage","setItem","data","_id","alert","err","_err$response","console","error","response","message","register","_err$response2","logout","clear","window","location","reload","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Navaneethan/Downloads/Flight-Booking-MERN-Webapp/client/src/context/GeneralContext.jsx"],"sourcesContent":["import React, { createContext, useState } from 'react';\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport const GeneralContext = createContext();\r\n\r\nconst GeneralContextProvider = ({ children }) => {\r\n  const [username, setUsername] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [usertype, setUsertype] = useState('');\r\n  const [ticketBookingDate, setTicketBookingDate] = useState();\r\n  const inputs = { username, email, usertype, password };\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const login = async (email, password) => {\r\n    try {\r\n      const loginInputs = { email, password };\r\n\r\n      const res = await axios.post('http://localhost:6001/login', loginInputs);\r\n      // Store user data in localStorage\r\n      localStorage.setItem('userId', res.data._id);\r\n      localStorage.setItem('userType', res.data.usertype);\r\n      localStorage.setItem('username', res.data.username);\r\n      localStorage.setItem('email', res.data.email);\r\n\r\n      // Redirect based on user type\r\n      if (res.data.usertype === 'customer') {\r\n        \r\n        navigate('/');\r\n        alert(\"Welcome \")\r\n      } else if (res.data.usertype === 'admin') {\r\n        navigate('/admin');\r\n      } else if (res.data.usertype === 'flight-operator') {\r\n        navigate('/flight-admin');\r\n      }\r\n\r\n    } catch (err) {\r\n      alert(\"Login failed! Please try again.\");\r\n      console.error(\"Login Error:\", err.response?.data || err.message);\r\n    }\r\n  };\r\n\r\n  const register = async () => {\r\n    try {\r\n      const res = await axios.post('http://localhost:6001/register', inputs);\r\n      // Store user data in localStorage\r\n      localStorage.setItem('userId', res.data._id);\r\n      localStorage.setItem('userType', res.data.usertype);\r\n      localStorage.setItem('username', res.data.username);\r\n      localStorage.setItem('email', res.data.email);\r\n\r\n      // Redirect based on user type\r\n      if (res.data.usertype === 'customer') {\r\n        navigate('/');\r\n      } else if (res.data.usertype === 'admin') {\r\n        navigate('/admin');\r\n      } else if (res.data.usertype === 'flight-operator') {\r\n        navigate('/flight-admin');\r\n      }\r\n\r\n    } catch (err) {\r\n      alert(\"Registration failed! Please try again.\");\r\n      console.error(\"Registration Error:\", err.response?.data || err.message);\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    // Clear localStorage\r\n    localStorage.clear();\r\n    alert(\"Logged out successfully!\");\r\n\r\n    // Refresh the page and redirect to home\r\n    window.location.reload();\r\n    navigate('/');\r\n  };\r\n\r\n  return (\r\n    <GeneralContext.Provider\r\n      value={{\r\n        login,\r\n        register,\r\n        logout,\r\n        username,\r\n        setUsername,\r\n        email,\r\n        setEmail,\r\n        password,\r\n        setPassword,\r\n        usertype,\r\n        setUsertype,\r\n        ticketBookingDate,\r\n        setTicketBookingDate,\r\n      }}\r\n    >\r\n      {children}\r\n    </GeneralContext.Provider>\r\n  );\r\n};\r\n\r\nexport default GeneralContextProvider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}