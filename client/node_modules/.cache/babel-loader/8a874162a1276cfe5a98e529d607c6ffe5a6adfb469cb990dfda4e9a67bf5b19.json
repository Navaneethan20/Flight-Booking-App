{"ast":null,"code":"import React,{useContext,useEffect,useState}from'react';import'../styles/LandingPage.css';import{useNavigate}from'react-router-dom';import{GeneralContext}from'../context/GeneralContext';import axios from'axios';import OffersSection from'./OffersSection';import WhyBookSection from'./WhyBookSection';import{Plane,Calendar,MapPin}from'lucide-react';// Added icons\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const LandingPage=()=>{const[error,setError]=useState('');const[loading,setLoading]=useState(false);const[checkBox,setCheckBox]=useState(false);const[departure,setDeparture]=useState('');const[destination,setDestination]=useState('');const[departureDate,setDepartureDate]=useState('');const[returnDate,setReturnDate]=useState('');const[flights,setFlights]=useState([]);const navigate=useNavigate();const{setTicketBookingDate}=useContext(GeneralContext);const cities=[\"Chennai\",\"Bangalore\",\"Hyderabad\",\"Mumbai\",\"Indore\",\"Delhi\",\"Pune\",\"Trivendrum\",\"Bhopal\",\"Kolkata\",\"Varanasi\",\"Jaipur\"].sort();// Sorted cities alphabetically\nuseEffect(()=>{const userType=localStorage.getItem('userType');if(userType==='admin')navigate('/admin');else if(userType==='flight-operator')navigate('/flight-admin');},[navigate]);const fetchFlights=async()=>{try{const date=new Date();const date1=new Date(departureDate);const date2=checkBox?new Date(returnDate):null;if(!departure||!destination||!departureDate||checkBox&&!returnDate){setError(\"Please fill all the required fields\");return;}if(departure===destination){setError(\"Departure and destination cannot be the same\");return;}if(date1<date||checkBox&&date2<date1){setError(\"Please check the dates\");return;}setError(\"\");setLoading(true);const response=await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-flights');setFlights(response.data);}catch(err){setError(\"Failed to fetch flights. Please try again.\");}finally{setLoading(false);}};const handleTicketBooking=async(id,origin,destination)=>{if(!localStorage.getItem('userId')){navigate('/auth');return;}const bookingDate=origin===departure?departureDate:returnDate;setTicketBookingDate(bookingDate);navigate(`/book-flight/${id}`);};const formatTime=time=>{return new Date(`2024-01-01T${time}`).toLocaleTimeString('en-US',{hour:'numeric',minute:'2-digit',hour12:true});};return/*#__PURE__*/_jsxs(\"div\",{className:\"landing-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"hero-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"hero-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Discover unbeatable fares on iairgo to your favorite destinations with fast and easy booking\"}),/*#__PURE__*/_jsx(\"p\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(Plane,{className:\"inline-icon\"}),\" Book a flight\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"round-trip-toggle\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"returnTrip\",checked:checkBox,onChange:e=>setCheckBox(e.target.checked)})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"select\",{value:departure,onChange:e=>setDeparture(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select City\"}),cities.map(city=>/*#__PURE__*/_jsx(\"option\",{value:city,children:city},city))]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"select\",{value:destination,onChange:e=>setDestination(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select City\"}),cities.map(city=>/*#__PURE__*/_jsx(\"option\",{value:city,children:city},city))]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:departureDate,onChange:e=>setDepartureDate(e.target.value),min:new Date().toISOString().split('T')[0]})}),checkBox&&/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:returnDate,onChange:e=>setReturnDate(e.target.value),min:departureDate||new Date().toISOString().split('T')[0]})}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchFlights,className:`search-button ${loading?'loading':''}`,disabled:loading,children:loading?'Searching...':'Search Flights'})]})]})]}),flights.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"flights-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Available Flights\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flights-grid\",children:flights.filter(flight=>checkBox?flight.origin===departure&&flight.destination===destination||flight.origin===destination&&flight.destination===departure:flight.origin===departure&&flight.destination===destination).map(flight=>/*#__PURE__*/_jsxs(\"div\",{className:\"flight-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flight-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:flight.flightName}),/*#__PURE__*/_jsxs(\"span\",{className:\"flight-number\",children:[\"Flight #\",flight.flightId]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flight-route\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"route-point\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"city\",children:flight.origin}),/*#__PURE__*/_jsx(\"p\",{className:\"time\",children:formatTime(flight.departureTime)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"route-arrow\",children:\"\\u2192\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"route-point\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"city\",children:flight.destination}),/*#__PURE__*/_jsx(\"p\",{className:\"time\",children:formatTime(flight.arrivalTime)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flight-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"value\",children:[\"\\u20B9\",flight.basePrice.toLocaleString()]}),/*#__PURE__*/_jsx(\"p\",{className:\"label\",children:\"Starting from\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"value\",children:flight.totalSeats}),/*#__PURE__*/_jsx(\"p\",{className:\"label\",children:\"Available Seats\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleTicketBooking(flight._id,flight.origin,flight.destination),className:\"book-button\",children:\"Book Now\"})]},flight._id))})]}):flights.length===0&&!error&&!loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"no-flights\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"No Flights Found\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Try adjusting your search criteria\"})]}),/*#__PURE__*/_jsx(OffersSection,{}),/*#__PURE__*/_jsx(WhyBookSection,{})]});};export default LandingPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}