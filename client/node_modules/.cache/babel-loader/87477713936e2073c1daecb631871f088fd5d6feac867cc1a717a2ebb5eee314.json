{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import{TrendingUp,TrendingDown,Users,Briefcase,Plane}from'lucide-react';import'../styles/Admin.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Admin=()=>{const navigate=useNavigate();const[users,setUsers]=useState([]);const[userCount,setUserCount]=useState(0);const[bookingCount,setbookingCount]=useState(0);const[flightsCount,setFlightsCount]=useState(0);// Mock trend data - in real application, calculate these from historical data\nconst[trends]=useState({users:{isUp:true,percentage:12},bookings:{isUp:true,percentage:8},flights:{isUp:false,percentage:5}});useEffect(()=>{fetchData();},[]);const fetchData=async()=>{try{const usersResponse=await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-users');setUserCount(usersResponse.data.length-1);setUsers(usersResponse.data.filter(user=>user.approval==='not-approved'));const bookingsResponse=await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-bookings');setbookingCount(bookingsResponse.data.length);const flightsResponse=await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-flights');setFlightsCount(flightsResponse.data.length);}catch(error){console.error('Error fetching data:',error);}};const approveRequest=async id=>{try{await axios.post('https://flight-booking-mern-webapp.onrender.com/approve-operator',{id});alert(\"Operator approved!\");fetchData();}catch(err){console.error('Error approving operator:',err);}};const rejectRequest=async id=>{try{await axios.post('https://flight-booking-mern-webapp.onrender.com/reject-operator',{id});alert(\"Operator rejected!\");fetchData();}catch(err){console.error('Error rejecting operator:',err);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-dashboard\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome Admin!\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stats-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stats-icon users\",children:/*#__PURE__*/_jsx(Users,{size:24})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Users\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stats-value\",children:/*#__PURE__*/_jsx(\"span\",{className:\"number\",children:userCount})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/all-users'),className:\"stats-button\",children:\"View All\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stats-icon bookings\",children:/*#__PURE__*/_jsx(Briefcase,{size:24})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Bookings\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stats-value\",children:/*#__PURE__*/_jsx(\"span\",{className:\"number\",children:bookingCount})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/all-bookings'),className:\"stats-button\",children:\"View All\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stats-icon flights\",children:/*#__PURE__*/_jsx(Plane,{size:24})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Flights\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stats-value\",children:/*#__PURE__*/_jsx(\"span\",{className:\"number\",children:flightsCount})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/all-flights'),className:\"stats-button\",children:\"View All\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"applications-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"New Operator Applications\"}),/*#__PURE__*/_jsx(\"div\",{className:\"applications-list\",children:users.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"no-applications\",children:\"No new requests...\"}):users.map(user=>/*#__PURE__*/_jsxs(\"div\",{className:\"application-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"application-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Operator name:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:user.username})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Operator email:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:user.email})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"application-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"approve-button\",onClick:()=>approveRequest(user._id),children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{className:\"reject-button\",onClick:()=>rejectRequest(user._id),children:\"Reject\"})]})]},user._id))})]})]});};export default Admin;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","axios","TrendingUp","TrendingDown","Users","Briefcase","Plane","jsx","_jsx","jsxs","_jsxs","Admin","navigate","users","setUsers","userCount","setUserCount","bookingCount","setbookingCount","flightsCount","setFlightsCount","trends","isUp","percentage","bookings","flights","fetchData","usersResponse","get","data","length","filter","user","approval","bookingsResponse","flightsResponse","error","console","approveRequest","id","post","alert","err","rejectRequest","className","children","size","onClick","map","username","email","_id"],"sources":["C:/Users/Navaneethan/Downloads/Flight-Booking-MERN-Webapp/client/src/pages/Admin.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { TrendingUp, TrendingDown, Users, Briefcase, Plane } from 'lucide-react';\r\nimport '../styles/Admin.css';\r\n\r\nconst Admin = () => {\r\n  const navigate = useNavigate();\r\n  const [users, setUsers] = useState([]);\r\n  const [userCount, setUserCount] = useState(0);\r\n  const [bookingCount, setbookingCount] = useState(0);\r\n  const [flightsCount, setFlightsCount] = useState(0);\r\n  // Mock trend data - in real application, calculate these from historical data\r\n  const [trends] = useState({\r\n    users: { isUp: true, percentage: 12 },\r\n    bookings: { isUp: true, percentage: 8 },\r\n    flights: { isUp: false, percentage: 5 }\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const usersResponse = await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-users');\r\n      setUserCount(usersResponse.data.length - 1);\r\n      setUsers(usersResponse.data.filter(user => user.approval === 'not-approved'));\r\n\r\n      const bookingsResponse = await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-bookings');\r\n      setbookingCount(bookingsResponse.data.length);\r\n\r\n      const flightsResponse = await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-flights');\r\n      setFlightsCount(flightsResponse.data.length);\r\n    } catch (error) {\r\n      console.error('Error fetching data:', error);\r\n    }\r\n  };\r\n\r\n  const approveRequest = async (id) => {\r\n    try {\r\n      await axios.post('https://flight-booking-mern-webapp.onrender.com/approve-operator', { id });\r\n      alert(\"Operator approved!\");\r\n      fetchData();\r\n    } catch (err) {\r\n      console.error('Error approving operator:', err);\r\n    }\r\n  };\r\n\r\n  const rejectRequest = async (id) => {\r\n    try {\r\n      await axios.post('https://flight-booking-mern-webapp.onrender.com/reject-operator', { id });\r\n      alert(\"Operator rejected!\");\r\n      fetchData();\r\n    } catch (err) {\r\n      console.error('Error rejecting operator:', err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-dashboard\">\r\n      <div className=\"dashboard-header\">\r\n        <h1>Welcome Admin!</h1>\r\n      </div>\r\n\r\n      <div className=\"stats-grid\">\r\n        <div className=\"stats-card\">\r\n          <div className=\"stats-icon users\">\r\n            <Users size={24} />\r\n          </div>\r\n          <div className=\"stats-content\">\r\n            <h3>Total Users</h3>\r\n            <div className=\"stats-value\">\r\n              <span className=\"number\">{userCount}</span>\r\n            </div>\r\n            <button \r\n              onClick={() => navigate('/all-users')}\r\n              className=\"stats-button\"\r\n            >\r\n              View All\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"stats-card\">\r\n          <div className=\"stats-icon bookings\">\r\n            <Briefcase size={24} />\r\n          </div>\r\n          <div className=\"stats-content\">\r\n            <h3>Total Bookings</h3>\r\n            <div className=\"stats-value\">\r\n              <span className=\"number\">{bookingCount}</span>\r\n            </div>\r\n            <button \r\n              onClick={() => navigate('/all-bookings')}\r\n              className=\"stats-button\"\r\n            >\r\n              View All\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"stats-card\">\r\n          <div className=\"stats-icon flights\">\r\n            <Plane size={24} />\r\n          </div>\r\n          <div className=\"stats-content\">\r\n            <h3>Total Flights</h3>\r\n            <div className=\"stats-value\">\r\n              <span className=\"number\">{flightsCount}</span>\r\n            </div>\r\n            <button \r\n              onClick={() => navigate('/all-flights')}\r\n              className=\"stats-button\"\r\n            >\r\n              View All\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"applications-section\">\r\n        <h2>New Operator Applications</h2>\r\n        <div className=\"applications-list\">\r\n          {users.length === 0 ? (\r\n            <p className=\"no-applications\">No new requests...</p>\r\n          ) : (\r\n            users.map((user) => (\r\n              <div className=\"application-item\" key={user._id}>\r\n                <div className=\"application-info\">\r\n                  <div className=\"info-row\">\r\n                    <span className=\"label\">Operator name:</span>\r\n                    <span className=\"value\">{user.username}</span>\r\n                  </div>\r\n                  <div className=\"info-row\">\r\n                    <span className=\"label\">Operator email:</span>\r\n                    <span className=\"value\">{user.email}</span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"application-actions\">\r\n                  <button \r\n                    className=\"approve-button\"\r\n                    onClick={() => approveRequest(user._id)}\r\n                  >\r\n                    Approve\r\n                  </button>\r\n                  <button \r\n                    className=\"reject-button\"\r\n                    onClick={() => rejectRequest(user._id)}\r\n                  >\r\n                    Reject\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Admin"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}