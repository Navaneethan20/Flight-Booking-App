{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import{TrendingUp,TrendingDown,Users,Briefcase,Plane}from'lucide-react';import'../styles/Admin.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Admin=()=>{const navigate=useNavigate();const[users,setUsers]=useState([]);const[userCount,setUserCount]=useState(0);const[bookingCount,setbookingCount]=useState(0);const[flightsCount,setFlightsCount]=useState(0);// Mock trend data - in real application, calculate these from historical data\nconst[trends]=useState({users:{isUp:true,percentage:12},bookings:{isUp:true,percentage:8},flights:{isUp:false,percentage:5}});useEffect(()=>{fetchData();},[]);const fetchData=async()=>{try{const usersResponse=await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-users');setUserCount(usersResponse.data.length-1);setUsers(usersResponse.data.filter(user=>user.approval==='not-approved'));const bookingsResponse=await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-bookings');setbookingCount(bookingsResponse.data.length);const flightsResponse=await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-flights');setFlightsCount(flightsResponse.data.length);}catch(error){console.error('Error fetching data:',error);}};const approveRequest=async id=>{try{await axios.post('https://flight-booking-mern-webapp.onrender.com/approve-operator',{id});alert(\"Operator approved!\");fetchData();}catch(err){console.error('Error approving operator:',err);}};const rejectRequest=async id=>{try{await axios.post('https://flight-booking-mern-webapp.onrender.com/reject-operator',{id});alert(\"Operator rejected!\");fetchData();}catch(err){console.error('Error rejecting operator:',err);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-dashboard\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome Admin!\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stats-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stats-icon users\",children:/*#__PURE__*/_jsx(Users,{size:24})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Users\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stats-value\",children:/*#__PURE__*/_jsx(\"span\",{className:\"number\",children:userCount})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/all-users'),className:\"stats-button\",children:\"View All\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stats-icon bookings\",children:/*#__PURE__*/_jsx(Briefcase,{size:24})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Bookings\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stats-value\",children:/*#__PURE__*/_jsx(\"span\",{className:\"number\",children:bookingCount})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/all-bookings'),className:\"stats-button\",children:\"View All\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stats-icon flights\",children:/*#__PURE__*/_jsx(Plane,{size:24})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Flights\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stats-value\",children:/*#__PURE__*/_jsx(\"span\",{className:\"number\",children:flightsCount})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/all-flights'),className:\"stats-button\",children:\"View All\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"applications-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"New Operator Applications\"}),/*#__PURE__*/_jsx(\"div\",{className:\"applications-list\",children:users.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"no-applications\",children:\"No new requests...\"}):users.map(user=>/*#__PURE__*/_jsxs(\"div\",{className:\"application-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"application-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Operator name:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:user.username})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Operator email:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:user.email})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"application-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"approve-button\",onClick:()=>approveRequest(user._id),children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{className:\"reject-button\",onClick:()=>rejectRequest(user._id),children:\"Reject\"})]})]},user._id))})]})]});};export default Admin;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}