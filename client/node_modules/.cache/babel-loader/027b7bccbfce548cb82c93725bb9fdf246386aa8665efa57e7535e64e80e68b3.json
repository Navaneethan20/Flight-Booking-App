{"ast":null,"code":"var _jsxFileName = \"D:\\\\Flight-Booking-MERN-Webapp\\\\client\\\\src\\\\context\\\\GeneralContext.jsx\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const GeneralContext = /*#__PURE__*/createContext();\nconst GeneralContextProvider = ({\n  children\n}) => {\n  _s();\n  const [inputs, setInputs] = useState({\n    username: '',\n    email: '',\n    password: '',\n    usertype: ''\n  });\n  const [ticketBookingDate, setTicketBookingDate] = useState();\n  const navigate = useNavigate();\n  const handleInputChange = (key, value) => {\n    setInputs(prev => ({\n      ...prev,\n      [key]: value\n    }));\n  };\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:6001';\n  const login = async () => {\n    try {\n      const loginInputs = {\n        email: inputs.email,\n        password: inputs.password\n      };\n      const res = await axios.post(`${API_URL}/login`, loginInputs);\n      localStorage.setItem('userId', res.data._id);\n      localStorage.setItem('userType', res.data.usertype);\n      localStorage.setItem('username', res.data.username);\n      localStorage.setItem('email', res.data.email);\n      if (res.data.usertype === 'customer') {\n        navigate('/');\n      } else if (res.data.usertype === 'admin') {\n        navigate('/admin');\n      } else if (res.data.usertype === 'flight-operator') {\n        navigate('/flight-admin');\n      }\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(err);\n      alert(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Login failed! Please try again.');\n    }\n  };\n  const register = async () => {\n    try {\n      const res = await axios.post(`${API_URL}/register`, inputs);\n      localStorage.setItem('userId', res.data._id);\n      localStorage.setItem('userType', res.data.usertype);\n      localStorage.setItem('username', res.data.username);\n      localStorage.setItem('email', res.data.email);\n      if (res.data.usertype === 'customer') {\n        navigate('/');\n      } else if (res.data.usertype === 'admin') {\n        navigate('/admin');\n      } else if (res.data.usertype === 'flight-operator') {\n        navigate('/flight-admin');\n      }\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      console.error(err);\n      alert(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'Registration failed! Please try again.');\n    }\n  };\n  const logout = () => {\n    localStorage.clear();\n    navigate('/');\n  };\n  return /*#__PURE__*/_jsxDEV(GeneralContext.Provider, {\n    value: {\n      login,\n      register,\n      logout,\n      inputs,\n      setInputs,\n      handleInputChange,\n      ticketBookingDate,\n      setTicketBookingDate\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n_s(GeneralContextProvider, \"OejDC2JfYZOELBDUhS1xum+pZjE=\", false, function () {\n  return [useNavigate];\n});\n_c = GeneralContextProvider;\nexport default GeneralContextProvider;\nvar _c;\n$RefreshReg$(_c, \"GeneralContextProvider\");","map":{"version":3,"names":["React","createContext","useState","axios","useNavigate","jsxDEV","_jsxDEV","GeneralContext","GeneralContextProvider","children","_s","inputs","setInputs","username","email","password","usertype","ticketBookingDate","setTicketBookingDate","navigate","handleInputChange","key","value","prev","API_URL","process","env","REACT_APP_API_URL","login","loginInputs","res","post","localStorage","setItem","data","_id","err","_err$response","_err$response$data","console","error","alert","response","message","register","_err$response2","_err$response2$data","logout","clear","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/Flight-Booking-MERN-Webapp/client/src/context/GeneralContext.jsx"],"sourcesContent":["import React, { createContext, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport const GeneralContext = createContext();\r\n\r\nconst GeneralContextProvider = ({ children }) => {\r\n  const [inputs, setInputs] = useState({\r\n    username: '',\r\n    email: '',\r\n    password: '',\r\n    usertype: '',\r\n  });\r\n\r\n  const [ticketBookingDate, setTicketBookingDate] = useState();\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const handleInputChange = (key, value) => {\r\n    setInputs((prev) => ({ ...prev, [key]: value }));\r\n  };\r\n\r\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:6001';\r\n\r\n  const login = async () => {\r\n    try {\r\n      const loginInputs = { email: inputs.email, password: inputs.password };\r\n      const res = await axios.post(`${API_URL}/login`, loginInputs);\r\n\r\n      localStorage.setItem('userId', res.data._id);\r\n      localStorage.setItem('userType', res.data.usertype);\r\n      localStorage.setItem('username', res.data.username);\r\n      localStorage.setItem('email', res.data.email);\r\n\r\n      if (res.data.usertype === 'customer') {\r\n        navigate('/');\r\n      } else if (res.data.usertype === 'admin') {\r\n        navigate('/admin');\r\n      } else if (res.data.usertype === 'flight-operator') {\r\n        navigate('/flight-admin');\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(err.response?.data?.message || 'Login failed! Please try again.');\r\n    }\r\n  };\r\n\r\n  const register = async () => {\r\n    try {\r\n      const res = await axios.post(`${API_URL}/register`, inputs);\r\n\r\n      localStorage.setItem('userId', res.data._id);\r\n      localStorage.setItem('userType', res.data.usertype);\r\n      localStorage.setItem('username', res.data.username);\r\n      localStorage.setItem('email', res.data.email);\r\n\r\n      if (res.data.usertype === 'customer') {\r\n        navigate('/');\r\n      } else if (res.data.usertype === 'admin') {\r\n        navigate('/admin');\r\n      } else if (res.data.usertype === 'flight-operator') {\r\n        navigate('/flight-admin');\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(err.response?.data?.message || 'Registration failed! Please try again.');\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.clear();\r\n    navigate('/');\r\n  };\r\n\r\n  return (\r\n    <GeneralContext.Provider\r\n      value={{\r\n        login,\r\n        register,\r\n        logout,\r\n        inputs,\r\n        setInputs,\r\n        handleInputChange,\r\n        ticketBookingDate,\r\n        setTicketBookingDate,\r\n      }}\r\n    >\r\n      {children}\r\n    </GeneralContext.Provider>\r\n  );\r\n};\r\n\r\nexport default GeneralContextProvider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}