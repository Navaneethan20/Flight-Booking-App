{"ast":null,"code":"import React,{useEffect,useState}from'react';import'../styles/Bookings.css';import axios from'axios';import{useNavigate,useLocation}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Bookings=()=>{const navigate=useNavigate();const location=useLocation();const{selectedSeats}=location.state||{};// Destructure selectedSeats from the location state\nconst[bookings,setBookings]=useState([]);const userId=localStorage.getItem('userId');const fetchBookings=async()=>{try{const response=await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-bookings');setBookings(response.data.reverse());}catch(error){console.error('Error fetching bookings:',error);}};useEffect(()=>{fetchBookings();},[]);const cancelTicket=async id=>{try{await axios.put(`https://flight-booking-mern-webapp.onrender.com/cancel-ticket/${id}`);alert('Ticket cancelled!');fetchBookings();// Refresh bookings after cancellation\n}catch(error){console.error('Error cancelling ticket:',error);}};const userBookings=bookings.filter(booking=>booking.user===userId);return/*#__PURE__*/_jsxs(\"div\",{className:\"bookings-page\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Your Bookings\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bookings-container\",children:userBookings.map(booking=>{var _booking$journeyDate;return/*#__PURE__*/_jsx(\"div\",{className:\"ticket\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"ticket-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ticket-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flight-name\",children:booking.flightName}),/*#__PURE__*/_jsxs(\"p\",{className:\"cities\",children:[booking.departure.slice(0,3).toUpperCase(),\" \\u2192 \",booking.destination.slice(0,3).toUpperCase()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flight-no\",children:[\"#\",booking.flightId]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ticket-details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"detail-item\",children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\" No of Passengers :\"}),\" \",booking.passengers.length]})}),/*#__PURE__*/_jsx(\"div\",{className:\"detail-item\",children:/*#__PURE__*/_jsx(\"p\",{children:(_booking$journeyDate=booking.journeyDate)===null||_booking$journeyDate===void 0?void 0:_booking$journeyDate.slice(0,10)})}),/*#__PURE__*/_jsx(\"div\",{className:\"detail-item\",children:selectedSeats&&selectedSeats.length>0&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Selected Seats:\"}),\" \",selectedSeats.join(', ')]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"detail-item\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u20B9\",booking.totalPrice]})})]}),booking.bookingStatus===\"confirmed\"&&/*#__PURE__*/_jsx(\"button\",{className:\"cancel-button\",onClick:()=>cancelTicket(booking._id),children:\"Cancel Ticket\"})]})},booking._id);})})]});};export default Bookings;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}