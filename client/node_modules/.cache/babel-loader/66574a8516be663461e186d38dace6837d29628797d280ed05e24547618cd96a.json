{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import'../styles/FlightAdmin.css';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const FlightAdmin=()=>{const navigate=useNavigate();const[userDetails,setUserDetails]=useState();const[bookingCount,setbookingCount]=useState(0);const[flightsCount,setFlightsCount]=useState(0);useEffect(()=>{fetchUserData();},[]);const fetchUserData=async()=>{try{const id=localStorage.getItem('userId');await axios.get(`https://flight-booking-mern-webapp.onrender.com/fetch-user/${id}`).then(response=>{setUserDetails(response.data);});}catch(err){}};useEffect(()=>{fetchData();},[]);const fetchData=async()=>{await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-bookings').then(response=>{setbookingCount(response.data.filter(booking=>booking.flightName===localStorage.getItem('username')).length);});await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-flights').then(response=>{setFlightsCount(response.data.filter(booking=>booking.flightName===localStorage.getItem('username')).length);});};return/*#__PURE__*/_jsx(\"div\",{className:\"flightAdmin-page\",children:userDetails?/*#__PURE__*/_jsx(_Fragment,{children:userDetails.approval==='not-approved'?/*#__PURE__*/_jsxs(\"div\",{className:\"notApproved-box\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Approval Required!!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your application is under processing. It needs an approval from the administrator. Kindly please be patience!!\"})]}):userDetails.approval==='rejected'?/*#__PURE__*/_jsxs(\"div\",{className:\"notApproved-box\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Application Rejected!!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"We are sorry to inform you that your application has been rejected!!\"})]}):userDetails.approval==='approved'?/*#__PURE__*/_jsxs(\"div\",{className:\"admin-page-cards\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card admin-card transactions-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Bookings\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",bookingCount,\" \"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>navigate('/flight-bookings'),children:\"View all\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card admin-card deposits-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Flights\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",flightsCount,\" \"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>navigate('/flights'),children:\"View all\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card admin-card loans-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"New Flight\"}),/*#__PURE__*/_jsx(\"p\",{children:\" (new route) \"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>navigate('/new-flight'),children:\"Add now\"})]})]}):\"\"}):\"\"});};export default FlightAdmin;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}