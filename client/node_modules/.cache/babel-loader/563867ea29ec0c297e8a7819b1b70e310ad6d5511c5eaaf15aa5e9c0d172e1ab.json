{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import'../styles/FlightAdmin.css';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const FlightAdmin=()=>{const navigate=useNavigate();const[userDetails,setUserDetails]=useState();const[bookingCount,setbookingCount]=useState(0);const[flightsCount,setFlightsCount]=useState(0);useEffect(()=>{fetchUserData();},[]);const fetchUserData=async()=>{try{const id=localStorage.getItem('userId');await axios.get(`https://flight-booking-mern-webapp.onrender.com/fetch-user/${id}`).then(response=>{setUserDetails(response.data);});}catch(err){}};useEffect(()=>{fetchData();},[]);const fetchData=async()=>{await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-bookings').then(response=>{setbookingCount(response.data.filter(booking=>booking.flightName===localStorage.getItem('username')).length);});await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-flights').then(response=>{setFlightsCount(response.data.filter(booking=>booking.flightName===localStorage.getItem('username')).length);});};return/*#__PURE__*/_jsx(\"div\",{className:\"flightAdmin-page\",children:userDetails?/*#__PURE__*/_jsx(_Fragment,{children:userDetails.approval==='not-approved'?/*#__PURE__*/_jsxs(\"div\",{className:\"notApproved-box\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Approval Required!!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your application is under processing. It needs an approval from the administrator. Kindly please be patience!!\"})]}):userDetails.approval==='rejected'?/*#__PURE__*/_jsxs(\"div\",{className:\"notApproved-box\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Application Rejected!!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"We are sorry to inform you that your application has been rejected!!\"})]}):userDetails.approval==='approved'?/*#__PURE__*/_jsxs(\"div\",{className:\"admin-page-cards\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card admin-card transactions-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Bookings\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",bookingCount,\" \"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>navigate('/flight-bookings'),children:\"View all\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card admin-card deposits-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Flights\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",flightsCount,\" \"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>navigate('/flights'),children:\"View all\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card admin-card loans-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"New Flight\"}),/*#__PURE__*/_jsx(\"p\",{children:\" (new route) \"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>navigate('/new-flight'),children:\"Add now\"})]})]}):\"\"}):\"\"});};export default FlightAdmin;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FlightAdmin","navigate","userDetails","setUserDetails","bookingCount","setbookingCount","flightsCount","setFlightsCount","fetchUserData","id","localStorage","getItem","get","then","response","data","err","fetchData","filter","booking","flightName","length","className","children","approval","onClick"],"sources":["C:/Users/Navaneethan/Downloads/Flight-Booking-MERN-Webapp/client/src/pages/FlightAdmin.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport axios from 'axios'\r\nimport '../styles/FlightAdmin.css'\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst FlightAdmin = () => {\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const [userDetails, setUserDetails] = useState();\r\n  const [bookingCount, setbookingCount] = useState(0);\r\n  const [flightsCount, setFlightsCount] = useState(0);\r\n\r\n  useEffect(()=>{\r\n    fetchUserData();\r\n  }, [])  \r\n\r\n  const fetchUserData = async () =>{\r\n    try{\r\n      const id = localStorage.getItem('userId');\r\n      await axios.get(`https://flight-booking-mern-webapp.onrender.com/fetch-user/${id}`).then(\r\n        (response)=>{\r\n          setUserDetails(response.data);\r\n          \r\n        }\r\n      )\r\n\r\n    }catch(err){\r\n\r\n    }\r\n  } \r\n\r\n\r\n  useEffect(()=>{\r\n\r\n    fetchData();\r\n  }, [])\r\n\r\n  const fetchData = async () =>{\r\n    await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-bookings').then(\r\n      (response)=>{\r\n        setbookingCount(response.data.filter(booking => booking.flightName === localStorage.getItem('username')).length);\r\n      }\r\n    );\r\n    await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-flights').then(\r\n      (response)=>{\r\n        setFlightsCount(response.data.filter(booking => booking.flightName === localStorage.getItem('username')).length);\r\n      }\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flightAdmin-page\">\r\n\r\n      {userDetails ?\r\n        <>\r\n          {userDetails.approval === 'not-approved' ?\r\n            <div className=\"notApproved-box\">\r\n              <h3>Approval Required!!</h3>\r\n              <p>Your application is under processing. It needs an approval from the administrator. Kindly please be patience!!</p>\r\n            </div>\r\n\r\n\r\n          : userDetails.approval === 'rejected' ?\r\n            <div className=\"notApproved-box\">\r\n              <h3>Application Rejected!!</h3>\r\n              <p>We are sorry to inform you that your application has been rejected!!</p>\r\n          </div>\r\n          : userDetails.approval === 'approved' ?\r\n            \r\n\r\n          <div className=\"admin-page-cards\">\r\n\r\n          <div className=\"card admin-card transactions-card\">\r\n              <h4>Bookings</h4>\r\n              <p> {bookingCount} </p>\r\n              <button className=\"btn btn-primary\" onClick={()=>navigate('/flight-bookings')}>View all</button>\r\n          </div>\r\n\r\n          <div className=\"card admin-card deposits-card\">\r\n              <h4>Flights</h4>\r\n              <p> {flightsCount} </p>\r\n              <button className=\"btn btn-primary\" onClick={()=>navigate('/flights')}>View all</button>\r\n          </div>\r\n\r\n          <div className=\"card admin-card loans-card\">\r\n              <h4>New Flight</h4>\r\n              <p> (new route) </p>\r\n              <button className=\"btn btn-primary\" onClick={()=>navigate('/new-flight')}>Add now</button>\r\n          </div>\r\n\r\n      </div>\r\n\r\n          :\r\n            \"\"\r\n          }\r\n        </>\r\n      :\r\n       \"\"\r\n      }\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default FlightAdmin"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}