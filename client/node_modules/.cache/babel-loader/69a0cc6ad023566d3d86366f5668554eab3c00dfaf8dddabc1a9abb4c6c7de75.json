{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Navaneethan/Downloads/Flight-Booking-MERN-Webapp/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Navaneethan/Downloads/Flight-Booking-MERN-Webapp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Navaneethan/Downloads/Flight-Booking-MERN-Webapp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{createContext,useState}from'react';import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";export var GeneralContext=/*#__PURE__*/createContext();var GeneralContextProvider=function GeneralContextProvider(_ref){var children=_ref.children;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),usertype=_useState8[0],setUsertype=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),ticketBookingDate=_useState10[0],setTicketBookingDate=_useState10[1];var inputs={username:username,email:email,usertype:usertype,password:password};var navigate=useNavigate();var login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(email,password){var loginInputs,res,_err$response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;loginInputs={email:email,password:password};_context.next=4;return axios.post('https://flight-booking-mern-webapp.onrender.com/login',loginInputs);case 4:res=_context.sent;// Store user data in localStorage\nlocalStorage.setItem('userId',res.data._id);localStorage.setItem('userType',res.data.usertype);localStorage.setItem('username',res.data.username);localStorage.setItem('email',res.data.email);// Redirect based on user type\nif(res.data.usertype==='customer'){navigate('/');}else if(res.data.usertype==='admin'){navigate('/admin');}else if(res.data.usertype==='flight-operator'){navigate('/flight-admin');}_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);alert(\"Login failed! Please try again.\");console.error(\"Login Error:\",((_err$response=_context.t0.response)===null||_err$response===void 0?void 0:_err$response.data)||_context.t0.message);case 16:case\"end\":return _context.stop();}},_callee,null,[[0,12]]);}));return function login(_x,_x2){return _ref2.apply(this,arguments);};}();var register=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res,_err$response2;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post('https://flight-booking-mern-webapp.onrender.com/register',inputs);case 3:res=_context2.sent;// Store user data in localStorage\nlocalStorage.setItem('userId',res.data._id);localStorage.setItem('userType',res.data.usertype);localStorage.setItem('username',res.data.username);localStorage.setItem('email',res.data.email);// Redirect based on user type\nif(res.data.usertype==='customer'){navigate('/');}else if(res.data.usertype==='admin'){navigate('/admin');}else if(res.data.usertype==='flight-operator'){navigate('/flight-admin');}_context2.next=15;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);alert(\"Registration failed! Please try again.\");console.error(\"Registration Error:\",((_err$response2=_context2.t0.response)===null||_err$response2===void 0?void 0:_err$response2.data)||_context2.t0.message);case 15:case\"end\":return _context2.stop();}},_callee2,null,[[0,11]]);}));return function register(){return _ref3.apply(this,arguments);};}();var logout=function logout(){// Clear localStorage\nlocalStorage.clear();alert(\"Logged out successfully!\");// Refresh the page and redirect to home\nwindow.location.reload();navigate('/');};return/*#__PURE__*/_jsx(GeneralContext.Provider,{value:{login:login,register:register,logout:logout,username:username,setUsername:setUsername,email:email,setEmail:setEmail,password:password,setPassword:setPassword,usertype:usertype,setUsertype:setUsertype,ticketBookingDate:ticketBookingDate,setTicketBookingDate:setTicketBookingDate},children:children});};export default GeneralContextProvider;","map":{"version":3,"names":["React","createContext","useState","axios","useNavigate","jsx","_jsx","GeneralContext","GeneralContextProvider","_ref","children","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","email","setEmail","_useState5","_useState6","password","setPassword","_useState7","_useState8","usertype","setUsertype","_useState9","_useState10","ticketBookingDate","setTicketBookingDate","inputs","navigate","login","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","loginInputs","res","_err$response","wrap","_callee$","_context","prev","next","post","sent","localStorage","setItem","data","_id","t0","alert","console","error","response","message","stop","_x","_x2","apply","arguments","register","_ref3","_callee2","_err$response2","_callee2$","_context2","logout","clear","window","location","reload","Provider","value"],"sources":["C:/Users/Navaneethan/Downloads/Flight-Booking-MERN-Webapp/client/src/context/GeneralContext.jsx"],"sourcesContent":["import React, { createContext, useState } from 'react';\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport const GeneralContext = createContext();\r\n\r\nconst GeneralContextProvider = ({ children }) => {\r\n  const [username, setUsername] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [usertype, setUsertype] = useState('');\r\n  const [ticketBookingDate, setTicketBookingDate] = useState();\r\n  const inputs = { username, email, usertype, password };\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const login = async (email, password) => {\r\n    try {\r\n      const loginInputs = { email, password };\r\n\r\n      const res = await axios.post('https://flight-booking-mern-webapp.onrender.com/login', loginInputs);\r\n      // Store user data in localStorage\r\n      localStorage.setItem('userId', res.data._id);\r\n      localStorage.setItem('userType', res.data.usertype);\r\n      localStorage.setItem('username', res.data.username);\r\n      localStorage.setItem('email', res.data.email);\r\n\r\n      // Redirect based on user type\r\n      if (res.data.usertype === 'customer') {\r\n        navigate('/');\r\n      } else if (res.data.usertype === 'admin') {\r\n        navigate('/admin');\r\n      } else if (res.data.usertype === 'flight-operator') {\r\n        navigate('/flight-admin');\r\n      }\r\n\r\n    } catch (err) {\r\n      alert(\"Login failed! Please try again.\");\r\n      console.error(\"Login Error:\", err.response?.data || err.message);\r\n    }\r\n  };\r\n\r\n  const register = async () => {\r\n    try {\r\n      const res = await axios.post('https://flight-booking-mern-webapp.onrender.com/register', inputs);\r\n      // Store user data in localStorage\r\n      localStorage.setItem('userId', res.data._id);\r\n      localStorage.setItem('userType', res.data.usertype);\r\n      localStorage.setItem('username', res.data.username);\r\n      localStorage.setItem('email', res.data.email);\r\n\r\n      // Redirect based on user type\r\n      if (res.data.usertype === 'customer') {\r\n        navigate('/');\r\n      } else if (res.data.usertype === 'admin') {\r\n        navigate('/admin');\r\n      } else if (res.data.usertype === 'flight-operator') {\r\n        navigate('/flight-admin');\r\n      }\r\n\r\n    } catch (err) {\r\n      alert(\"Registration failed! Please try again.\");\r\n      console.error(\"Registration Error:\", err.response?.data || err.message);\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    // Clear localStorage\r\n    localStorage.clear();\r\n    alert(\"Logged out successfully!\");\r\n\r\n    // Refresh the page and redirect to home\r\n    window.location.reload();\r\n    navigate('/');\r\n  };\r\n\r\n  return (\r\n    <GeneralContext.Provider\r\n      value={{\r\n        login,\r\n        register,\r\n        logout,\r\n        username,\r\n        setUsername,\r\n        email,\r\n        setEmail,\r\n        password,\r\n        setPassword,\r\n        usertype,\r\n        setUsertype,\r\n        ticketBookingDate,\r\n        setTicketBookingDate,\r\n      }}\r\n    >\r\n      {children}\r\n    </GeneralContext.Provider>\r\n  );\r\n};\r\n\r\nexport default GeneralContextProvider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}