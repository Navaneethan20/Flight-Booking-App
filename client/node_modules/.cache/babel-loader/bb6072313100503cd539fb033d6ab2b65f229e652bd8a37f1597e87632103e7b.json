{"ast":null,"code":"import axios from'axios';import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import'../styles/Flights.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Flights=()=>{const[userDetails,setUserDetails]=useState();useEffect(()=>{fetchUserData();},[]);const fetchUserData=async()=>{try{const id=localStorage.getItem('userId');await axios.get(`https://flight-booking-mern-webapp.onrender.com/fetch-user/${id}`).then(response=>{setUserDetails(response.data);console.log(response.data);});}catch(err){}};const[flights,setFlights]=useState([]);const navigate=useNavigate();const fetchFlights=async()=>{await axios.get('https://flight-booking-mern-webapp.onrender.com/fetch-flights').then(response=>{setFlights(response.data);console.log(response.data);});};useEffect(()=>{fetchFlights();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"allFlightsPage\",children:userDetails?/*#__PURE__*/_jsx(_Fragment,{children:userDetails.approval==='not-approved'?/*#__PURE__*/_jsxs(\"div\",{className:\"notApproved-box\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Approval Required!!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your application is under processing. It needs an approval from the administrator. Kindly please be patience!!\"})]}):userDetails.approval==='approved'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"All Flights\"}),/*#__PURE__*/_jsx(\"div\",{className:\"allFlights\",children:flights.filter(flight=>flight.flightName===localStorage.getItem('username')).map(Flight=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"allFlights-Flight\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"_id:\"}),\" \",Flight._id]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Flight Id:\"}),\" \",Flight.flightId]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Flight name:\"}),\" \",Flight.flightName]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Starting station:\"}),\" \",Flight.origin]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Departure time:\"}),\" \",Flight.departureTime]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Destination:\"}),\" \",Flight.destination]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Arrival time:\"}),\" \",Flight.arrivalTime]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Base price:\"}),\" \",Flight.basePrice]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Total seats:\"}),\" \",Flight.totalSeats]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>navigate(`/edit-flight/${Flight._id}`),children:\"Edit details\"})})]},Flight._id);})})]}):\"\"}):\"\"});};export default Flights;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}